/* empty css                  */import{C as defineStore,b as ref,d as reactive,_ as _export_sfc,D as useCssVars,u as useConfigStore,s as storeToRefs,G as computed,c as createElementBlock,B as createBaseVNode,a as createVNode,w as withCtx,g as unref,F as Fragment,h as renderList,H as ElMessageBox,i as router,x as ElButton,I as ElCountdown,J as ElProgress,K as ElPopconfirm,L as ElDialog,o as openBlock,f as createTextVNode,M as back_default,N as toDisplayString,O as check_default,P as ElDivider,Q as ElTag,q as ElInput,R as ElRate}from"./index-B04CA7JJ.js";const useAppStore=defineStore("app",()=>{const completed=ref(!1),countDown=reactive({start:0,end:0}),correctCnt=ref(0),setComplete=a=>{completed.value=a},setCountDown=a=>{const s=Date.now();countDown.start=s,countDown.end=countDown.start+1e3*60*(a??0)},submit=async arithmeticList=>{correctCnt.value=0;for(const{formula,value}of arithmeticList)eval(formula)==Number(value)&&++correctCnt.value;setComplete(!0)};return{completed,correctCnt,countDown,setComplete,setCountDown,submit}}),_hoisted_1={id:"container",class:"container"},_hoisted_2={class:"header"},_hoisted_3={class:"header__left"},_hoisted_4={class:"header__mid"},_hoisted_5={class:"header__right"},_hoisted_6={class:"body"},_hoisted_7={class:"dialog-score"},_hoisted_8={class:"demonstration"},_hoisted_9={class:"dialog-score"},_sfc_main={__name:"PaperView",setup(a){useCssVars(t=>({"3df5ba5d":v.value}));const s=useAppStore(),l=useConfigStore(),{configs:n,arithmeticList:r}=storeToRefs(l),{completed:f,correctCnt:d,countDown:p}=storeToRefs(s);s.setCountDown(n.value.timer);const m=()=>{f.value?router.push({name:"Config"}).then(()=>{l.setConfigFlag(!1),s.setComplete(!1)}):ElMessageBox.confirm("此操作会清空已经做的题目，是否返回上一页？","警告",{confirmButtonText:"确认",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,type:"warning",center:!0,roundButton:!0}).then(()=>{router.push({name:"Config"}).then(()=>{l.setConfigFlag(!1),s.setComplete(!1)})}).catch(t=>{console.log(t)})},c=ref(!1),u=computed(()=>Number((d.value/n.value.cnt*5).toFixed(2))),_=()=>{c.value=!0,s.submit(r.value)},g=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],h=computed(()=>{let t=0;for(const{value:e}of r.value)typeof e<"u"&&String(e).replace(/\s+/g,"")!==""&&t++;return Math.round(t/n.value.cnt*100)}),v=computed(()=>{const t=document.getElementById("app"),e=document.getElementById("container");return(e==null?void 0:e.clientHeight)>(t==null?void 0:t.clientHeight)?"100%":"auto"}),V=()=>{ElMessageBox.confirm("已经到时间啦！","警告",{confirmButtonText:"确认",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1,type:"warning",center:!0,showClose:!1}).then(_)};return(t,e)=>{const i=ElButton,C=ElCountdown,w=ElProgress,B=ElPopconfirm,N=ElDivider,E=ElTag,x=ElInput,y=ElRate,b=ElDialog;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(i,{icon:unref(back_default),link:"",size:"large",onClick:m},{default:withCtx(()=>[createTextVNode("返回")]),_:1},8,["icon"])]),createBaseVNode("div",_hoisted_4,[createVNode(C,{format:"mm:ss",value:unref(p).end,onFinish:V},null,8,["value"])]),createBaseVNode("div",_hoisted_5,[createVNode(w,{type:"circle",indeterminate:"",percentage:h.value,color:g,width:50},null,8,["percentage"]),createVNode(B,{title:"是否提交考卷?",onConfirm:_,"confirm-button-text":"是","cancel-button-text":"否"},{reference:withCtx(()=>[createVNode(i,{type:"warning"},{default:withCtx(()=>[createTextVNode("提交")]),_:1})]),_:1})])]),createVNode(N,{style:{margin:"12px 0"}}),createBaseVNode("div",_hoisted_6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r),o=>(openBlock(),createElementBlock("div",{class:"body_item",key:o.id},[createVNode(E,{class:"header__body_item_left",type:"primary"},{default:withCtx(()=>[createTextVNode(toDisplayString(o.formula+" ="),1)]),_:2},1024),createVNode(x,{class:"header__body_item_right",type:"number",size:"small","controls-position":"right",modelValue:o.value,"onUpdate:modelValue":k=>o.value=k},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),createVNode(b,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=o=>c.value=o),"align-center":"","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_9,[createVNode(i,{type:"success",icon:unref(check_default),onClick:e[1]||(e[1]=o=>c.value=!1)},{default:withCtx(()=>[createTextVNode("确认")]),_:1},8,["icon"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_7,[createBaseVNode("span",_hoisted_8,toDisplayString(unref(d))+" / "+toDisplayString(unref(n).cnt),1),createVNode(y,{size:"large",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),"allow-half":"",disabled:""},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}},PaperView=_export_sfc(_sfc_main,[["__scopeId","data-v-e94f13f3"]]);export{PaperView as default};
